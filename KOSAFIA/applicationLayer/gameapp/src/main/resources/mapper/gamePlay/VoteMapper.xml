<mapper namespace="com.kosafia.gameapp.mapper.gamePlay.VoteMapper">
    <!-- 투표 정보 삽입 -->
    <insert id="insertVote" parameterType="com.kosafia.gameapp.dto.MafiaVoteDto">
        INSERT INTO Vote (turn_id, voter_id, target_id, vote_type, voted_at)
        VALUES (#{turnId}, #{voterId}, #{targetId}, #{voteType}, NOW())
    </insert>

    <!-- 특정 턴의 득표 현황 조회 -->
    <select id="getVoteResultsByTurn" parameterType="int" resultType="map">
        SELECT target_id AS targetId, COUNT(*) AS votes
        FROM Vote
        WHERE turn_id = #{turnId} AND vote_type = 'mafia'
        GROUP BY target_id
    </select>
</mapper>